<!DOCTYPE html>
<html ng-app="AEIRS">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
	<title>AEIRS</title>

	<!-- Materialize CSS -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link type="text/css" rel="stylesheet" href="./css/materialize.css">
	<link type="text/css" rel="stylesheet" href="./css/style.css">

	<!-- JavaScript for: jQuery, angular, materialize, and angular-materialize. All of which are needed. -->
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
	<!-- ANGULAR -->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular-route.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0/angular-messages.js"></script>

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-materialize/0.2.1/angular-materialize.min.js"></script>
	<script>
		(function(){
			var AEIRSAppModule = angular.module("AEIRS",["ngRoute","ngMessages","ui.materialize"]);

			AEIRSAppModule.config(['$routeProvider','$locationProvider',
			function ($routeProvider, $locationProvider){
				$routeProvider
				.when("/",{
				templateUrl: "partials/landing.html",
				controller : "LandingController"
				})
				.when("/x",{
				templateUrl: "partials/haha.html",
				controller : "LandingController"
				})
				.otherwise({redirectTo: "/"});
				// $locationProvider.html5Mode({
				// 	enabled: true,
				// 	requireBase: false
				// });
			}]);
   
			AEIRSAppModule.factory("usersFactory",function($http){
				var factory = {};
				var users = [];
				factory.test = function(callback){
					$http.get("/haha").then(function(data){
						users = data;
						callback(users);
					});
				}
				factory.login = function(info, callback){
					$http.post("/login", info).then(function(data){
						users = data;
						callback(users);
					});
				}
				factory.register = function(info, callback){
					$http.post("/register", info).then(function(data){

						console.log("usersFactory-------\n",data);
						users = data;
						callback(users);
					});
				}
				return factory;
				// factory.test = function(info,callback){
				// 	$http.get("/haha").then(function(data){
				// 		users = data;
				// 		callback(users);
				// 	})
				// }
			});
			AEIRSAppModule.controller("LandingController",function($scope,usersFactory){
				$scope.userLogin = function(){
					console.log($scope.user);
					usersFactory.login($scope.user,function(data){
						console.log("-------------------",data);
					});
				}
				$scope.userRegister = function(){
					console.log($scope.user);
					usersFactory.register($scope.user, function(data){
						console.log("-------------------haha",data);
					});
				}
			});
		})();

</script>
</head>
<body>
	<div ng-view="">
	</div>
</body>
</html>